# å‘ç‰ˆè„šæœ¬ä½¿ç”¨è¯´æ˜

## åŠŸèƒ½

è‡ªåŠ¨åŒ–å‘ç‰ˆæµç¨‹ï¼ŒåŒ…æ‹¬ï¼š
- âœ… éªŒè¯ç‰ˆæœ¬å·æ ¼å¼
- âœ… æ£€æŸ¥ git çŠ¶æ€ï¼ˆæœªæäº¤çš„æ›´æ”¹ã€åˆ†æ”¯ç­‰ï¼‰
- âœ… è‡ªåŠ¨ç”Ÿæˆ Version Codeï¼ˆåŸºäºæ—¥æœŸæ—¶é—´ï¼‰
- âœ… æ›´æ–° `pubspec.yaml` ç‰ˆæœ¬å·
- âœ… åˆ›å»º git commit å’Œ tag
- âœ… æ¨é€åˆ°è¿œç¨‹ä»“åº“
- âœ… è§¦å‘ CI è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ

## ä½¿ç”¨æ–¹æ³•

### Linux/macOS

```bash
# èµ‹äºˆæ‰§è¡Œæƒé™ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰
chmod +x scripts/release.sh

# å‘å¸ƒç¨³å®šç‰ˆ
./scripts/release.sh 0.1.0

# å‘å¸ƒé¢„å‘å¸ƒç‰ˆ
./scripts/release.sh 0.1.0-beta --pre
./scripts/release.sh 0.2.0-rc1 --pre
```

### Windows

```cmd
# å‘å¸ƒç¨³å®šç‰ˆ
powershell -ExecutionPolicy Bypass -File scripts\release.ps1 0.1.0

# å‘å¸ƒé¢„å‘å¸ƒç‰ˆ
powershell -ExecutionPolicy Bypass -File scripts\release.ps1 0.1.0-beta --pre
powershell -ExecutionPolicy Bypass -File scripts\release.ps1 0.2.0-rc1 --pre
```

## ç‰ˆæœ¬å·è§„åˆ™

### æ ¼å¼

```
ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢å·[-é¢„å‘å¸ƒæ ‡è¯†]

ç¤ºä¾‹ï¼š
0.1.0        - ç¨³å®šç‰ˆ
0.1.0-beta   - Beta æµ‹è¯•ç‰ˆ
0.1.0-rc1    - Release Candidate 1
1.0.0-alpha  - Alpha æµ‹è¯•ç‰ˆ
```

### è¯­ä¹‰åŒ–ç‰ˆæœ¬

- **ä¸»ç‰ˆæœ¬å·**ï¼šä¸å…¼å®¹çš„ API ä¿®æ”¹
- **æ¬¡ç‰ˆæœ¬å·**ï¼šå‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- **ä¿®è®¢å·**ï¼šå‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

### Version Code

è‡ªåŠ¨ç”Ÿæˆï¼Œæ ¼å¼ï¼š`YYYYMMDDhh`

ç¤ºä¾‹ï¼š
- `2026012414` = 2026å¹´1æœˆ24æ—¥14æ—¶

## å‘ç‰ˆæµç¨‹

### 1. å‡†å¤‡é˜¶æ®µ

```bash
# ç¡®ä¿æ‰€æœ‰æ›´æ”¹å·²æäº¤
git status

# ç¡®ä¿åœ¨ main åˆ†æ”¯
git checkout main

# æ‹‰å–æœ€æ–°ä»£ç 
git pull
```

### 2. è¿è¡Œè„šæœ¬

```bash
# Linux/macOS
./scripts/release.sh 0.1.0

# Windows
powershell -ExecutionPolicy Bypass -File scripts/release.ps1 0.1.0
```

### 3. è„šæœ¬æ‰§è¡Œæµç¨‹

1. **éªŒè¯ç¯å¢ƒ**
   - æ£€æŸ¥ç‰ˆæœ¬å·æ ¼å¼
   - æ£€æŸ¥ git çŠ¶æ€
   - æ£€æŸ¥å½“å‰åˆ†æ”¯
   - æ£€æŸ¥ tag æ˜¯å¦å·²å­˜åœ¨

2. **æ˜¾ç¤ºå‘ç‰ˆä¿¡æ¯**
   ```
   ==========================================
     å‘ç‰ˆä¿¡æ¯
   ==========================================
   ç‰ˆæœ¬å·: 0.1.0
   Version Name: 0.1.0
   Version Code: 2026012414
   ç±»å‹: ç¨³å®šç‰ˆ
   åˆ†æ”¯: main
   ==========================================
   ```

3. **ç¡®è®¤å‘ç‰ˆ**
   - è¾“å…¥ `y` ç¡®è®¤
   - è¾“å…¥ `n` å–æ¶ˆ

4. **è‡ªåŠ¨æ‰§è¡Œ**
   - æ›´æ–° `pubspec.yaml`
   - åˆ›å»º commit
   - æ¨é€åˆ°è¿œç¨‹
   - åˆ›å»ºå¹¶æ¨é€ tag

5. **è§¦å‘ CI**
   - GitHub Actions è‡ªåŠ¨æ„å»º
   - ç”Ÿæˆ Changelogï¼ˆç¨³å®šç‰ˆï¼‰
   - åˆ›å»º Release
   - å‘é€ Telegram é€šçŸ¥ï¼ˆå¦‚å·²é…ç½®ï¼‰

### 4. éªŒè¯å‘å¸ƒ

è®¿é—®ä»¥ä¸‹é“¾æ¥æŸ¥çœ‹æ„å»ºçŠ¶æ€ï¼š
- GitHub Actions: https://github.com/Lingyan000/fluxdo/actions
- Releases: https://github.com/Lingyan000/fluxdo/releases

## ç¨³å®šç‰ˆ vs é¢„å‘å¸ƒç‰ˆ

### ç¨³å®šç‰ˆï¼ˆæ—  `-` åç¼€ï¼‰

```bash
./scripts/release.sh 0.1.0
```

**ç‰¹æ€§**ï¼š
- âœ… è‡ªåŠ¨ç”Ÿæˆ Changelog
- âœ… ç”Ÿæˆ SHA256 æ ¡éªŒå’Œ
- âœ… Release æ ‡è®°ä¸ºæ­£å¼ç‰ˆ
- âœ… å‘é€ Telegram é€šçŸ¥ï¼ˆğŸš€ï¼‰

### é¢„å‘å¸ƒç‰ˆï¼ˆæœ‰ `-` åç¼€ï¼‰

```bash
./scripts/release.sh 0.1.0-beta --pre
```

**ç‰¹æ€§**ï¼š
- âŒ ä¸ç”Ÿæˆ Changelog
- âŒ ä¸ç”Ÿæˆ SHA256 æ ¡éªŒå’Œ
- âœ… Release æ ‡è®°ä¸º prerelease
- âœ… å‘é€ Telegram é€šçŸ¥ï¼ˆğŸ§ªï¼‰

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•åˆ é™¤é”™è¯¯çš„ tagï¼Ÿ

```bash
# åˆ é™¤æœ¬åœ° tag
git tag -d v0.1.0

# åˆ é™¤è¿œç¨‹ tag
git push origin :refs/tags/v0.1.0

# åˆ é™¤ GitHub Releaseï¼ˆæ‰‹åŠ¨åœ¨ç½‘é¡µä¸Šåˆ é™¤ï¼‰
```

### Q: å¦‚ä½•å›æ»šç‰ˆæœ¬å·ï¼Ÿ

```bash
# 1. åˆ é™¤é”™è¯¯çš„ tagï¼ˆè§ä¸Šï¼‰
# 2. å›æ»š commit
git reset --hard HEAD~1
git push --force

# 3. é‡æ–°è¿è¡Œè„šæœ¬
./scripts/release.sh 0.1.0
```

### Q: è„šæœ¬æ‰§è¡Œå¤±è´¥æ€ä¹ˆåŠï¼Ÿ

æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. æ˜¯å¦æœ‰æœªæäº¤çš„æ›´æ”¹
2. æ˜¯å¦åœ¨æ­£ç¡®çš„åˆ†æ”¯
3. Tag æ˜¯å¦å·²å­˜åœ¨
4. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸

### Q: å¦‚ä½•è·³è¿‡æŸäº›æ£€æŸ¥ï¼Ÿ

ä¸å»ºè®®è·³è¿‡æ£€æŸ¥ï¼Œä½†å¦‚æœå¿…é¡»ï¼š
- ç¼–è¾‘è„šæœ¬ï¼Œæ³¨é‡Šæ‰ç›¸åº”çš„æ£€æŸ¥ä»£ç 
- æˆ–è€…æ‰‹åŠ¨æ‰§è¡Œå‘ç‰ˆæ­¥éª¤

## æ‰‹åŠ¨å‘ç‰ˆï¼ˆä¸ä½¿ç”¨è„šæœ¬ï¼‰

å¦‚æœè„šæœ¬æ— æ³•ä½¿ç”¨ï¼Œå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œï¼š

```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·
# ç¼–è¾‘ pubspec.yamlï¼Œä¿®æ”¹ version å­—æ®µ

# 2. æäº¤æ›´æ”¹
git add pubspec.yaml
git commit -m "chore: bump version to 0.1.0"
git push

# 3. åˆ›å»ºå¹¶æ¨é€ tag
git tag -a v0.1.0 -m "Release v0.1.0"
git push origin v0.1.0
```

## æ³¨æ„äº‹é¡¹

1. **ç‰ˆæœ¬å·å¿…é¡»é€’å¢**ï¼šæ–°ç‰ˆæœ¬å·å¿…é¡»å¤§äºå½“å‰ç‰ˆæœ¬
2. **Tag ä¸å¯é‡å¤**ï¼šç›¸åŒçš„ tag åªèƒ½åˆ›å»ºä¸€æ¬¡
3. **Changelog è‡ªåŠ¨ç”Ÿæˆ**ï¼šç¨³å®šç‰ˆä¼šè‡ªåŠ¨æ›´æ–° CHANGELOG.md
4. **å¤‡ä»½é‡è¦æ•°æ®**ï¼šå‘ç‰ˆå‰ç¡®ä¿ä»£ç å·²å¤‡ä»½
5. **æµ‹è¯•å……åˆ†**ï¼šé¢„å‘å¸ƒç‰ˆå……åˆ†æµ‹è¯•åå†å‘å¸ƒç¨³å®šç‰ˆ

## ç›¸å…³æ–‡æ¡£

- [GitHub Actions å·¥ä½œæµ](.github/workflows/build.yaml)
- [Release Template](.github/release_template.md)
- [Changelog](../CHANGELOG.md)
